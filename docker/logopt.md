일반적으로 도커 컨테이너 안에서 돌아가는 프로세스는 데몬이 아닌 포어그라운드 프로세스이길 기대한다. stdout과 stderr로 내보내는 로그를 도커가 받아서 `docker logs`로 노출해 주는 것이 정상적이다. 로그를 쏘는 행위 자체도 부작용이므로 한 번에 하나만 하자는 도커의 철학에는 맞지 않는다는 얘기. 하지만 그렇게 쌓인 로그를 어떻게 한 곳에 모아서 볼 수 있는지에 대해서는 딱히 정답은 없었다. 커뮤니티의 해결책은, 컨테이너 밖에서 로그를 수집해서 다른 곳으로 쏘는 것이었다. 그 또한 도커 컨테이너이면 좋고. 그 역할을 하던 것이 [logspout](https://github.com/gliderlabs/logspout)였다.

... 는 것이 올 초까지의 상황이었는데, 도커 1.6에서 log-driver가 소개되었다. (지금은 1.9.1이 나와 있는데...) 드라이버를 선택하기에 따라 `syslog`로 보낼 수도 있고 `fluentd`로 보낼 수도 있고 그렇다. 암튼 내 관심사는 log-driver가 아니고 log-opt.

--log-opt max-size=100m --log-opt max-file=10 이런 식으로 logrotate를 할 수 있다. 이걸 몰라서 지난주에 클베 머신을 터뜨렸습니다. 하하.
